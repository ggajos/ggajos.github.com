<!DOCTYPE html>
<html lang="en-US">
    <head itemscope itemtype="http://schema.org/WebPage">
        <base href="http://ggajos.com/environment-variables-management"/>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="description" content="M solution. Managing library installations without relying on installers. Easy switching from one version of library to another.">
        <meta name="keywords" content="windows environment management, variables management, java libraries versioning, java strict control, global windows path setup, switching between versions" />
        <link rel="canonical" href="http://ggajos.com/environment-variables-management" />
        <link rel="alternate" type="application/rss+xml" title="RSS for ggajos.com" href="http://ggajos.com/rss.xml"/>
        <title>Windows environment variables management.</title>
        <!--twitter -->
        <meta name="twitter:site" content="@ggajos"/>
        <meta name="twitter:creator" content="@ggajos"/>
        <meta name="twitter:url" content="http://ggajos.com/environment-variables-management"/>
        <!-- facebook -->
        <meta property="article:author" content="https://www.facebook.com/grzegorz.gajos"/>
        <meta property="og:url" content="http://ggajos.com/environment-variables-management"/>
        <meta property="og:site_name" content="ggajos"/>
        <meta property="og:title" content="Windows environment variables management."/>
        <meta property="og:description" content="M solution. Managing library installations without relying on installers. Easy switching from one version of library to another."/>
        <meta property="og:type" content="article" />
        <meta property="og:locale" content="en_US" />
        <!-- itemprop -->
        <meta itemprop="name" content="Windows environment variables management." />
        <meta itemprop="author" content="Grzegorz Gajos" />
        <meta itemprop="breadcrumb" content="http://ggajos.com" />
        <meta itemprop="keywords" content="windows environment management, variables management, java libraries versioning, java strict control, global windows path setup, switching between versions" />
        <meta itemprop="description" content="M solution. Managing library installations without relying on installers. Easy switching from one version of library to another." />
		<!-- google -->
		<meta name="google-site-verification" content="Ls52KLW0k11NkXeBx89rhcLnXOfGbaDlNSCkGawXcM4" />
        <!-- script/css -->
        <link rel="stylesheet" type="text/css" href="/assets/css/main.css?">
        <script async src="/assets/js/modernizr.js"></script>
        <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script> <![endif]-->
        <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script> <![endif]-->
    </head>
    <body class="theme-base-01">
        <header class="main-header">
            <div class="wc-container">
                <h2><a href="/">Java Developer</a></h2>
                <ul>
	<li>
		by <a href="http://ggajos.com/about">Grzegorz Gajos</a> &middot;
	</li>
	<li>
		check <a href="http://ggajos.com/rss.xml">rss feed</a> &middot;
	</li>
	<li>
		see <a href="http://ggajos.com/blog">all posts</a> &middot;
	</li>
	<li>
		or <a href="http://ggajos.com/">home page</a>
	</li>
</ul>
<ul>
	<li>
		I won’t tell you that
		<a href="http://opentangerine.com" rel="nofollow">Open Tangerine</a>
		team is among the most ingenious and professional engineers.
	</li>
</ul>
            </div>
        </header>
        <div class="page-content wc-container">

	<div class="post">
		<h1>Windows environment variables management.</h1>
		<p class="post-meta">
            
                <span class="categories">
                    windows, path, and management
                </span> |
            
            <span class="post-date">
                Nov 1, 2015
            </span> | Interesting? Share on
			<a href="https://twitter.com/share?url=http://ggajos.com/environment-variables-management&amp;text=Windows environment variables management. by @ggajos"
   title="Share on Twitter" class="share" rel="nofollow">Twitter</a>,
<a href="http://www.facebook.com/sharer/sharer.php?u=http://ggajos.com/environment-variables-management"
   title="Share on Facebook" class="share" rel="nofollow">Facebook</a>,
<a href="https://plus.google.com/share?url=http://ggajos.com/environment-variables-management"
   title="Share on Google+" class="share" rel="nofollow">Google+</a>,
<a href="https://www.linkedin.com/cws/share?url=http://ggajos.com/environment-variables-management"
   title="Share on LinkedIn" class="share" rel="nofollow">LinkedIn</a>
		</p>
		<p>A couple of projects at work, few programming languages, and your environment is polluted by different libraries or dependencies. Managing installed ones is always a hassle. It starts simple. Download, unzip, add the <code>bin</code> directory to the <code>PATH</code>. Everybody knows how the <code>PATH</code> configuration dialog looks in Windows (is it Microsoft easter egg?). I believe that installing the external tool in order to manage single variable is madness.</p>

<h2 id="why-adding-binaries-directory-to-the-path-is-so-awkward">Why adding binaries directory to the PATH is so awkward?</h2>

<p>The problem is very old and yet I couldn’t find any practical solution for it. When library becomes popular, developers invest some time to develop the VM (version management) application. For grails, we have <code>gvm</code> or <code>rvm</code> for Ruby. Why is the additional tool needed when in many cases the only thing that has to be done is adding the bin directory to <code>PATH</code> or define some other environment variable like <code>JAVA_HOME</code>? Well, for many it is easier to install new version management tool than just put <code>; C:/a/simple/path</code> at the end of the line.</p>

<h2 id="what-is-the-m-solution">What is the <em>M</em> solution?</h2>

<p>The name came from <code>m.bat</code> file which is actually doing all the magic. For a few years, I was using this as workaround but it appears to be a long-term solution that resolve:</p>

<ul>
  <li>Managing a library installations without relying on installers.</li>
  <li>Easy switching from one version of the library to another.</li>
  <li>Absolutely no <code>PATH</code> variable pollution by default.</li>
  <li>Easy disabling and enabling libraries.</li>
  <li>Portability! Clone environment in no time.</li>
</ul>

<h2 id="how-to-implement-your-own-m-solution">How to implement your own <em>M</em> solution?</h2>

<p>First, decide where you would like to hold all your libraries. In the following example, I’m going to use <code>C:\lib</code>. Therefore, create <code>C:\lib\m.bat</code> file with following content:</p>

<div class="highlight"><pre><code class="language-batch" data-lang="batch">set path_lib=C:\lib
set path_build=
rem &lt;placeholder&gt;
if defined original_path (goto skip) else (goto save)
:save
set original_path=%path%
:skip
set path=%path_build%;%original_path%</code></pre></div>

<p>Add <code>C:\lib</code> directory to your <code>PATH</code> so you can reach it by typing just <em>M</em> in the command line. This is the last time you are using windows environment dialog ever. Now let’s try to check how it looks like in day to day work. </p>

<h2 id="how-to-setup-and-manage-two-versions-of-grails">How to setup and manage two versions of grails?</h2>

<p>Let’s download two versions of grails library and put them into separate directories.</p>

<div class="highlight"><pre><code class="language-batch" data-lang="batch">C:\lib\grails-2.2.4
C:\lib\grails-2.3.0</code></pre></div>

<p>Let’s replace <code>rem &lt;placeholder&gt;</code> with following lines</p>

<div class="highlight"><pre><code class="language-batch" data-lang="batch">rem set grails_home=%path_lib%\grails-2.2.4
set grails_home=%path_lib%\grails-2.3.0
set path_build=%path_build%;%path_lib%\%grails_home%\bin</code></pre></div>

<p>In order to execute grails-2.3.0 we can open <code>cmd</code> and type</p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh">C:<span class="se">\&gt;</span>m
C:<span class="se">\&gt;</span>grails run-app</code></pre></div>

<p>In order to switch versions, we just need to switch <code>rem</code> prefix.</p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nb">set </span><span class="nv">grails_home</span><span class="o">=</span>%path_lib%<span class="se">\g</span>rails-2.2.4
rem <span class="nb">set </span><span class="nv">grails_home</span><span class="o">=</span>%path_lib%<span class="se">\g</span>rails-2.3.0</code></pre></div>

<p>Batch <em>M</em> is going to initialize <code>PATH</code> and the different version is going to be loaded. You might notice guard block at the end of the file which is allowing to execute <em>M</em> command multiple times and reinitialize all variables. For a very long time, it was looking like an ugly workaround for me. However, it appears to be a very handy way to manage and access all types of binaries. This approach is working quite well even with some database servers or other shell applications.</p>

		<hr/>
		<p>
			Like it? Share it on
			<a href="https://twitter.com/share?url=http://ggajos.com/environment-variables-management&amp;text=Windows environment variables management. by @ggajos"
   title="Share on Twitter" class="share" rel="nofollow">Twitter</a>,
<a href="http://www.facebook.com/sharer/sharer.php?u=http://ggajos.com/environment-variables-management"
   title="Share on Facebook" class="share" rel="nofollow">Facebook</a>,
<a href="https://plus.google.com/share?url=http://ggajos.com/environment-variables-management"
   title="Share on Google+" class="share" rel="nofollow">Google+</a>,
<a href="https://www.linkedin.com/cws/share?url=http://ggajos.com/environment-variables-management"
   title="Share on LinkedIn" class="share" rel="nofollow">LinkedIn</a>
		</p>
	</div>

	
	<div class="related">
		<h4>Related Posts</h4>
		<ul class="posts">
		    
		    <li>
			  <span>27 Sep 2016 &raquo;</span>
			  <a href="http://ggajos.com/how-hibernate-ruined-my-career">How Hibernate Almost Ruined My Career</a>
		    </li>
		    
		    <li>
			  <span>19 Sep 2016 &raquo;</span>
			  <a href="http://ggajos.com/sjug-why-hibernate">Silesia Java User Group, Seriously. Why Hibernate?</a>
		    </li>
		    
		    <li>
			  <span>14 May 2016 &raquo;</span>
			  <a href="http://ggajos.com/sjug-static-code-analysis">Silesia Java User Group, Static code analysis</a>
		    </li>
		    
		    <li>
			  <span>06 May 2016 &raquo;</span>
			  <a href="http://ggajos.com/ot-clean-final-version">ot-clean, Final version</a>
		    </li>
		    
		    <li>
			  <span>04 May 2016 &raquo;</span>
			  <a href="http://ggajos.com/ot-clean-tests-refactoring">ot-clean, Tests refactoring</a>
		    </li>
		    
		</ul>
	</div>
	

	<h4>About the author</h4>
<p>
    <a href="http://ggajos.com/about">Grzegorz Gajos</a>,
    Software Architect
    with international consulting and programming background. Co-founder of Open Tangerine
    Software House. Quality evangelist. An experienced entrepreneur, out of the box thinker and problem solver.
</p>

	<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'ggajos';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

	<div class="post-footer">
		<div class="column-1">
			
				<a href="http://ggajos.com/laptop-vs-desktop-4-vs-6-cores"><< Older</a>
			
		</div>
		<div class="column-2"><a href="http://ggajos.com/ ">Home</a></div>
		<div class="column-3">
			
				<a href="http://ggajos.com/configuration-files">Newer >></a>
			
		</div>
	</div>
</div>
 

        <footer>
        </footer>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <!-- Site js -->
        <script src="/assets/js/all.js"></script>
        <!-- Google analytics  -->
        <script type="text/javascript">

    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
        a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-30132359-4', 'auto');
    ga('send', 'pageview');

</script>
    </body>
</html>
